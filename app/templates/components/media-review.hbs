{{#if isUserFocused}}
  <div class="media-left">
    <a href={{href-to "users.index" review.user}} style="height: 100%;">
      {{lazy-image url=(image review.user.avatar "small")}}
    </a>
  </div>
  <div class="media-body">
    <small class="media-heading">

      {{! review i18n title }}
      {{i18nTitle}}

      {{! TODO - @Josh - Review rating stars }}
      {{star-rating review.rating readOnly=true}}
    </small>

    {{! review content }}
    <div class="comment-body">
      {{! legacy reviews are from Hummingbird }}
      {{#if isExpanded}}
        {{#if review.legacy}}
          {{{review.content}}}
        {{else}}
          {{{review.contentFormatted}}}
        {{/if}}
      {{else}}
        {{#if review.legacy}}
          {{text-clipper review.content length=400 options=(hash html=true imageWeight=220)}}
        {{else}}
          {{text-clipper review.contentFormatted length=400 options=(hash html=true)}}
        {{/if}}
      {{/if}}
    </div>

    {{! review likes }}
    <div class="stream-item-activity">
      {{likeable-resource
        resource=review
        likesCount=review.likesCount
        likesCountUpdate=(action (mut review.likesCount))
        showUsers=true
      }}
    </div>

    {{! review actions }}
    <div class="review-action pull-sm-right">
      {{! edit review }}
      {{#if (can-mutate review.user review)}}
        <a href="#" {{action (toggle "reviewOpen" this)}}>edit</a>
        {{#if reviewOpen}}
          {{to-elsewhere named="modal" send=(component "modals/media-review"
            modalId=(concat elementId "-review-modal")
            onClose=(toggle-action "reviewOpen" this)
            review=review
            updateEntry=(action "updateEntry")
          )}}
        {{/if}}
      {{/if}}
    </div>
  </div>
{{else}}
  <div class="stream-review row">
    <div class="stream-item--media col-xs-4 col-sm-3">
      <a href={{href-to (concat (model-type review.media) ".show") review.media}}>
        {{lazy-image url=(image review.media.posterImage "large")}}
      </a>
    </div>
    <div class="col-xs no-padding-left">
      <div class="stream-review-content">
        <header class="author-header">
          <a class="review-avatar" href="#">
            {{lazy-image url=(image review.user.avatar "small")}}
          </a>
          <h5 class="name-heading person-heading left" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <small>Review by</small>
            {{! @vevix name needs hooked up }}
            <a href="#" itemprop="sameAs">Josh</a>
          </h5>
        </header>
        <small class="media-heading">
          {{! Show media title if we aren't user focused }}
          <h6>
            <a href={{href-to (concat (model-type review.media) ".show") review.media}}>
              {{review.media.canonicalTitle}}
            </a>
            <span class="stream-review-rating">
              {{star-rating review.rating readOnly=true}}
            </span>
          </h6>

          {{! review i18n title }}
          <!-- {{i18nTitle}} -->

          {{! @vevix only show if author hasn't finished media.
          Be mindful of Episode / Chapter distinction. }}
          <small class="review-media-progress">
            This is a review up to Episode 4.
          </small>

        </small>

        {{! review content }}
        {{! @vevix limit text length and have the 'read more' link
            send user to permalink page instead of expanding. }}
        <div class="comment-body">
          {{! legacy reviews are from Hummingbird }}
          {{#if isExpanded}}
            {{#if review.legacy}}
              {{{review.content}}}
            {{else}}
              {{{review.contentFormatted}}}
            {{/if}}
          {{else}}
            {{#if review.legacy}}
              {{text-clipper review.content length=400 options=(hash html=true imageWeight=220)}}
            {{else}}
              {{text-clipper review.contentFormatted length=400 options=(hash html=true)}}
            {{/if}}
          {{/if}}
        </div>
      </div>
    </div>
  </div>

  {{! review likes }}
  <div class="stream-item-activity">
    {{likeable-resource
      resource=review
      likesCount=review.likesCount
      likesCountUpdate=(action (mut review.likesCount))
      showUsers=true
    }}
  </div>

  <div class="stream-item-options">
    <a href={{tweetLink}} target="_blank" {{action "trackEngagement" "click" preventDefault=false}}>
      {{svg-jar "l-twitter"}}
      Tweet
    </a>
    <a href={{facebookLink}} target="_blank" {{action "trackEngagement" "click" preventDefault=false}}>
      {{svg-jar "l-facebook"}}
      Share
    </a>

    {{! @vevix these dropdown links need hooked up }}
    <span class="more-wrapper">
      <a href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="more-drop">
        <svg width="24" height="6" viewBox="0 0 24 6" xmlns="http://www.w3.org/2000/svg"><title>Shape</title><path d="M3 0a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm9 0a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm9 0a3 3 0 1 0 0 6 3 3 0 0 0 0-6z" fill="#CACACA" fill-rule="evenodd"></path></svg>
      </a>
      <div class="dropdown-menu dropdown-menu-right">
        <a href="#" data-clipboard-text="http://localhost:32777/posts/4" class="dropdown-item" data-ember-action="" data-ember-action-2022="2022">
          Copy Link to Review
        </a>

        {{! edit review }}
        {{#if (can-mutate review.user review)}}
          <a href="#" class="dropdown-item" {{action (toggle "reviewOpen" this)}}>Edit Review</a>
          {{#if reviewOpen}}
            {{to-elsewhere named="modal" send=(component "modals/media-review"
              modalId=(concat elementId "-review-modal")
              onClose=(toggle-action "reviewOpen" this)
              review=review
              updateEntry=(action "updateEntry")
            )}}
          {{/if}}
        {{/if}}

        <a href="#" class="dropdown-item" data-ember-action="" data-ember-action-2024="2024">
          Report Review
        </a>

        <a href="#" class="dropdown-item" data-ember-action="" data-ember-action-2024="2024">
          Delete Review
        </a>
      </div>
    </span>
  </div>

{{/if}}

{{! @vevix xoxo <3 }}
