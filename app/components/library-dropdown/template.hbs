{{#bootstrap/bs-dropdown as |dropdown|}}
  {{#dropdown.button disabled=(if (or updateTask.isRunning (not entryIsLoaded)) "disabled") data-test-selector="library-dropdown"}}
    {{#if updateTask.isIdle}}
      {{#if entry}}
        {{currentStatus}}
      {{else}}
        {{#if entryIsLoaded}}
          Add to Library
        {{else}}
          Loading...
          {{fa-icon "spinner" spin=true}}
        {{/if}}
      {{/if}}
    {{else}}
      Updating...
      {{fa-icon "spinner" spin=true}}
    {{/if}}
  {{/dropdown.button}}

  {{#dropdown.menu}}
    {{#each statuses as |status|}}
      {{#dropdown.menu-item data-test-selector="library-dropdown-item" onClick=(perform updateTask status)}}
        {{status.string}}
      {{/dropdown.menu-item}}
    {{/each}}
  {{/dropdown.menu}}
{{/bootstrap/bs-dropdown}}